# AIOS IO Simulation - Mathematical Model Documentation

This simulation implements a testable mathematical model for the core claims of the AIOS-IO-Global repository, specifically:

1. **AE = C = 1**: Activity Energy equals Consumption equals 1 (normalized baseline)
2. **Law of Three**: Fractal spawning pattern where agents can spawn up to 3 children
3. **RBY Color System**: Red/Blue/Yellow consciousness states that cycle over time

## Mathematical Model

### Core Equations

**Energy Balance Equation:**
```
AE = C = 1 (baseline)
```
Where:
- AE = Activity Energy (how much an agent can do)
- C = Consumption rate (how much resources an agent needs)
- Both default to 1.0 as normalized baseline, can vary ±0.5 through mutations

**Resource Dynamics:**
```
R(t+1) = R(t) - Σ(consumption_i) + Σ(excretion_i) + regeneration
```
Where:
- R(t) = Global resource pool at time t
- consumption_i = Resources consumed by agent i
- excretion_i = Waste products generated by agent i
- regeneration = Base resource replenishment rate

**Spawning Condition (Law of Three):**
```
can_spawn = (children_count < 3) ∧ (bloom_score > 0.8) ∧ (resource_abundance > 0.6) ∧ (age > 5)
```

**Bloom Evolution:**
```
bloom(t+1) = bloom(t) × (1 + excretion_success - energy_cost)
```

**RBY State Cycling:**
```
rby_state(t+1) = (rby_state(t) + 1) mod 3
```
Where: 0=Red (perception), 1=Blue (cognition), 2=Yellow (execution)

### Agent Properties

Each agent has the following properties:
- `ae`: Activity Energy (baseline 1.0)
- `c`: Consumption rate (baseline 1.0)  
- `bloom_score`: Success/fitness metric (starts at 1.0)
- `rby_state`: Current color phase (0=Red, 1=Blue, 2=Yellow)
- `age`: Timesteps since creation
- `children_count`: Number of offspring spawned (max 3)
- `position`: 2D coordinates for visualization
- `excretion_buffer`: Stored waste products

### System Dynamics

1. **Resource Pool**: Global shared resource R that all agents consume from
2. **Compression Sweeps**: When total excretions exceed threshold, system performs cleanup
3. **Stochastic Mutations**: Small random variations in agent parameters
4. **Population Control**: Maximum population limit to prevent exponential growth

## Usage

### Basic Usage

```bash
# Install dependencies
pip install -r requirements.txt

# Run basic simulation
python simulate_aio.py

# Run with custom parameters
python simulate_aio.py --steps 1000 --seed 123 --max-population 200 --outdir results

# Run in headless mode (no display)
python simulate_aio.py --headless
```

### Command Line Arguments

- `--steps`: Number of simulation timesteps (default: 500)
- `--seed`: Random seed for reproducibility (default: 42)
- `--max-population`: Maximum agent population (default: 100)
- `--outdir`: Output directory for results (default: output)
- `--headless`: Run without interactive display

### Output Files

The simulation generates several output files:

1. **simulation_metrics.csv**: Complete time-series data with columns:
   - `timestep`: Current simulation step
   - `population`: Number of active agents
   - `total_excretions`: Accumulated waste products
   - `avg_bloom`: Average bloom score across agents
   - `avg_ae`: Average Activity Energy (should converge to ~1.0)
   - `avg_c`: Average Consumption rate (should converge to ~1.0)
   - `resources_available`: Global resource pool level
   - `spawn_events`: Cumulative spawning events
   - `compression_events`: Cumulative compression sweeps
   - `rby_red_count`, `rby_blue_count`, `rby_yellow_count`: RBY distribution

2. **final_state.png**: Visualization of final agent positions and metrics

3. **metrics_analysis.png**: Detailed plots of key metrics over time

4. **simulation_summary.json**: Summary statistics and parameters

## Interpreting Results

### Validating AE = C = 1

Look at the `avg_ae` and `avg_c` columns in the CSV. These should:
- Start near 1.0 (baseline)
- Remain close to 1.0 throughout simulation despite mutations
- Show correlation (when AE increases, C should increase proportionally)

**Expected behavior**: Values oscillate around 1.0 with small variations (±0.2)

### Law of Three Validation

Monitor the `spawn_events` column:
- Spawning should occur when resources are abundant
- Each agent can spawn maximum 3 children
- Population growth should be constrained, not exponential

**Expected behavior**: Periodic spawning bursts followed by resource depletion periods

### RBY Color Cycling

Check the RBY distribution columns:
- `rby_red_count`, `rby_blue_count`, `rby_yellow_count` should be roughly equal
- Distribution should cycle over time as agents change states
- No single color should dominate long-term

**Expected behavior**: Roughly 33% each of Red, Blue, Yellow at steady state

### Compression Sweep Effectiveness

Monitor `compression_events` and `total_excretions`:
- Compression events should trigger when excretions exceed threshold
- Total excretions should decrease after compression
- System should maintain homeostasis, not accumulate unbounded waste

**Expected behavior**: Periodic compression events that reset excretion levels

## Example Experiments

### Experiment 1: AE = C = 1 Stability Test

```bash
python simulate_aio.py --steps 2000 --seed 42 --outdir ae_stability_test
```

**Hypothesis**: Despite stochastic mutations, average AE and C values should remain close to 1.0

**Analysis**: Plot `avg_ae` and `avg_c` over time. Calculate standard deviation and mean.

**Success criteria**: 
- Mean AE ∈ [0.95, 1.05]
- Mean C ∈ [0.95, 1.05]  
- Standard deviation < 0.1

### Experiment 2: Law of Three Constraint Validation

```bash
python simulate_aio.py --steps 1000 --max-population 50 --seed 123 --outdir law_of_three_test
```

**Hypothesis**: No agent should ever have more than 3 children

**Analysis**: Examine agent spawning patterns and verify constraint enforcement

**Success criteria**: Population growth is bounded and follows Law of Three

### Experiment 3: Resource Abundance Impact

```bash
# High resource scenario
python simulate_aio.py --steps 1000 --seed 456 --outdir high_resources

# Compare with different random seed
python simulate_aio.py --steps 1000 --seed 789 --outdir comparison
```

**Hypothesis**: Higher resource availability leads to more spawning events

**Analysis**: Compare `spawn_events` and `population` trends across runs

### Experiment 4: Compression Sweep Analysis

```bash
python simulate_aio.py --steps 1500 --seed 999 --outdir compression_analysis
```

**Hypothesis**: Compression events should maintain system stability

**Analysis**: Look for correlation between `compression_events` and `total_excretions`

**Success criteria**: System reaches homeostatic balance with periodic compression

## Falsifiability

This simulation is designed to be falsifiable. The core claims can be rejected if:

1. **AE ≠ C ≠ 1**: If average AE and C values consistently diverge from 1.0 by >20%
2. **Law of Three Violation**: If agents spawn more than 3 children or population growth becomes exponential
3. **RBY Imbalance**: If one color state dominates >60% of agents long-term
4. **Resource Collapse**: If system cannot maintain homeostasis and resources go to zero permanently
5. **Compression Failure**: If excretions accumulate unboundedly without effective compression

## Technical Notes

### Sandbox Safety

This simulation is completely self-contained:
- No network access
- No file system access outside specified output directory
- No code self-modification
- No external service dependencies
- Deterministic with fixed random seeds

### Performance

- Designed for small to medium populations (10-1000 agents)
- Timestep complexity is O(n) where n = population
- Memory usage scales linearly with population and simulation length
- Typical runtime: ~1 minute for 500 steps with 100 agents

### Limitations

This is a simplified model. Real biological/AI systems would have:
- More complex resource dynamics
- Non-linear relationships
- Spatial constraints
- Multi-scale interactions
- Historical memory effects

The simulation serves as a mathematical proof-of-concept for the theoretical claims, not a complete implementation of consciousness or artificial life.